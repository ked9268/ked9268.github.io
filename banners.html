<!DOCTYPE html>
<html>
	<head>
		<script src="functions.js"></script>
		<link rel="stylesheet" href="css/base.css">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta charset="UTF-8">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<title>banners</title>
		<style>
			#form {
				position:absolute;
				top:300px;
				left:300px;
		
			}
            table, th, td, tr {
                /*top:500px;*/
                position: relative;
                border: 1px solid black;
                border-collapse: collapse;
            }
            #table {
					position:relative;
					top:100px;
			
			}
            #buttons {
					position:relative;
					
			}
		</style>
	</head>
	<body>
		<!--
		<select id="where">
			<option value="RLBag" id="RLBagID"> Ralph Lauren Bag</option>
			<option value="MBag" id="MBagID"> Maroon Bag</option>
			<option value="GBag" id="GBagID"> Green Bag</option>
			<option value="C1Bag" id=C1BagID> ClearBox 1</option>
		</select>
	-->
		<div id="move">
			<img src="images/blue_circle.png" id="logo">
			<div id="dropdown">
				<a id="wonder">wonder.tv</a>
				<div class="content">
					<li class="navbar"><a href="Computerindex.html" ontouchend="index.html">home</a></li>
					<li class="navbar"><a href="contact.html" ontouchend="contact.html">contact</a></li>
					<li class="navbar"><a>donation</a></li>
					<li class="navbar"><a href="games.html">games</a></li>
					<li class="navbar"><a href="pictures.html">pictures</a></li>
					<li class="navbar"><a href="videos.html">videos</a></li>
					<li class="navbar"><a href="sounds.html">sounds</a></li>
					<li class="navbar"><a href="gifs.html">gifs</a></li>
					<li class="navbar"><a href="banners.html">banners</a></li>
				</div>
			</div>
		</div>
		<div id="buttons">
			<input type="file" id="upload" onchange="readFile()">
			<button id="showform">Show form</button>
			<button type="button" onclick="getValue()">Get Value</button>
			<button id="select">Table selects</button>
		</div>
		<div id="insert">
			<table id="table"></table>
		</div>
		<!--
		<form id="form">
			<input type="text" name="item" id="item"><br>
			<label>Item</label><br>
			<input type="text" name="quantity" id="quantity"><br>
			<label>Quantity</label><br>
			<input type="text" name="colour" id="colour"><br>
			<label>Colour</label><br>
			<input type="text" name="notes" id="notes"><br>
			<label>Notes</label><br>
			<input type="button" value="Submit" onclick="getFormData()">
		</form>
	-->
		<script>
			var edit;
			var processing;
			var placeholder;
			var length;
			var keys; //is the integer value of the first value of "Item" in the edited version of the csv file.
			var returnArray = "";
			const values_of_item = [];
			function getContentOfData() {
				return "";
			}
			function produceTable() {
				formTable();
			}
			function getFormData() {
				//getContentOfTable();
				var item = document.getElementById("item").value;
				document.getElementById("item").value = "";
				var quantity = document.getElementById("quantity").value;
				document.getElementById("quantity").value = "";
				var colour = document.getElementById("colour").value;
				document.getElementById("colour").value = "";
				var notes = document.getElementById("notes").value;
				document.getElementById("notes").value = "";
				insert(item, quantity, colour, notes);
				//produceTable();
			}
			function header() {
				var header = '<ol><li><tr>' + '<th>' + "Item" + '</th>' + '<th>' + "Quantity" + '</th>'
					+ '<th>' + "Colour" + '</th>' + '<th>' + "Notes" + '</th>' + '</tr></ol></li> ';
				return header;
			}
			function start() {
				return '<table><ol><li>';
			}
			function end() {
				return '</ol></<li></table> ';
			}
			function openNewRow(value) {
				return '<tr>';
			}
			function closeNewRow(value) {
				return '</tr>'
			}
			function newValue(value) {
				return '<th>' + value + '</th>';
			}
			function insert(value, value1, value2, value3) {
				var add = '<th>' + value + '</th>' + '<th>' + value1 + '</th>'
					+ '<th>' + value2 + '</th>' + '<th>' + value3 + '</th>' + '</tr></ol></li> ';
				var returnKey = "";
				returnKey = returnArray.substring(0, returnArray.length - 11) + add;
				returnArray = returnKey;
				var key = document.getElementById("table").innerHTML = returnKey;
				console.log(key);
			}
			function load() {
			}
			function formTable() {
				//Get together all the parts
				document.getElementById("table").innerHTML = header();
			}
			function getValue() {
				console.log(document.getElementById("where").value);
			}
			function readFile() {
				const file = document.getElementById('upload').files[0];
				console.log(file)
				const reader = new FileReader();
				reader.readAsText(file);
				reader.onload = function () {
					//edit is the raw csv file that is unedited, with whitespace.
					edit = reader.result;
					var value = removeWhiteSpace(edit);
					length = value.length;
					//setTable sends the value to be processed by auxilliary methods.
					setTable(process(value));
				}
			}
			function removeWhiteSpace(value) {
				/**
				 * removes white spaces in original css file and returns result to variable value.
				 * */
				var processing = value.replace(/\s/g, "");
				return processing;
			}
			function process(value) {
				/**
					 * sets table as empty.
					 * and puts all items of value into seperate containers in an array.
					 * then finds where the first "Item" is and marks this as global variable 'keys'
				 */
				document.getElementById("table").innerHTML = "";
				values_of_items = value.split(",");
				//Marking where the first string is!
				if (values_of_items.includes("Item") === true) {
					for (let i = 0; i < values_of_items.length; i++) {
						if (values_of_items[i] === "Item") {
							keys = i;
							break;
						}
					}
				}
				return values_of_items;
			}
			function setTable(value) {
				/**
				 *
				 *
				 *
				 * returnArray defines array that is being returned to html to show.
				 */
				var newRow = "";
				returnArray = "";
				console.log(value.length);
				console.log(values_of_items.length);
				console.log(values_of_items);
				console.log(document.getElementById("table").innerHTML);
				for (let i = keys; i < values_of_items.length; i++) {
					if (i % 7 === 0) {
						returnArray = returnArray + newValue(value[i]) + '<th><button>+</button></th><br>' + openNewRow() + closeNewRow();
					}
					else {
						if (i % 7 !== 0) {
							returnArray = returnArray + newValue(value[i]);
							//if ( i % 7 === 6) {
							//returnArray = returnArray + '<th><button>+</button></th><br>';
							//}
						}
					}
				}
				returnArray = returnArray + end() + "</table>";
				document.getElementById("table").innerHTML = returnArray;
				console.log(document.getElementById("table").innerHTML);

			}
		</script>
	</body>
</html>
