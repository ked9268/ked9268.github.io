<!DOCTYPE html>
<html>
<head>
	<script src="functions.js"></script>
	<link rel="stylesheet" href="base.css">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta charset="UTF-8">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<title>banners</title>
	<style>
	
	table, th, td {
  		border: 1px solid black;
  		border-collapse: collapse;
		}
	</style>
</head>
<body>
		<select id="where">
			<option value="RLBag" id="RLBagID"> Ralph Lauren Bag</option>
			<option value="MBag" id="MBagID"> Maroon Bag</option>
			<option value="GBag" id="GBagID"> Green Bag</option>
			<option value="C1Bag" id=C1BagID> ClearBox 1</option>	
		</select>
		<button type="button" onclick="getValue()">
		</button>
		<table id="table">
		  <tr>
		  	<th>Ralph Lauren Bag </th>
		  	<th>Maroon Bag </th>
		  	<th>Green Bag </th>
		  	<th>ClearBox1 </th>
		  </tr>
		  <tr>
		  	
		  
		  </tr>
		</table>
		<input type="file" id="upload" onchange="readFile()">
		<button onclick="sendRequest() "> Connect</button>
		<script>
			var edit;
			var processing;
			var placeholder;
			const values_of_item = [];
				function getValue(){
						console.log(document.getElementById("where").value);
				}
				function sendRequest(){
                	console.log("Hello World");
					var xhttp = new XMLHttpRequest();
					xhttp.open("GET","newfile.php",true);
					xhttp.send();
				}
				function readFile(){
						const file=document.getElementById('upload').files[0];
						console.log(file)
						const reader= new FileReader();
						reader.readAsText(file);
						reader.onload = function(){
							edit = reader.result;
							var value = removeWhiteSpace(edit);
							console.log(value);
							process(value);
							find(value);
						}
						
				}
				function removeWhiteSpace(value){
					var processing = value.replace(/\s/g, "");
					return processing;
				}
				function process(value){	
					//find points of  all "Item,Quantity,Colour,Notes""
					console.log(value);
					var length = value.length;
					//console.log(length);
					if(value.includes("Item") === true){
						var c = value.search("Item");
						values_of_item.push(c);
						//console.log(processing.substring(c,c+4));
						//processing.substring(c,length);
						//console.log(values_of_item);
						//console.log(value.substring(c,length).length);
						process(value.substring(c+4,length));
					}
					else{
						console.log(values_of_item);
						
					}
				}
				function find(value){
							console.log(value.substring(199,203));
							var comma = value.search(",");
							console.log(comma);
							
				
				}	
				
		</script>
</body>
</html>