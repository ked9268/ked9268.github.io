<!DOCTYPE html>
<html>
	<head>
		<script src="functions.js"></script>
		<link rel="stylesheet" href="css/base.css">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta charset="UTF-8">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<title>banners</title>
		<style>
			#form {
					position:absolute;
					top:300px;
					left:300px;
		
			}
            table, th, td {
                position: relative;
                border: 1px solid black;
                border-collapse: collapse;
            }
			#move, #dropdown {
				position:relative;
					 
            }
            #upload {
					position:relative;
					top:200px;
					left:200px;
			}
		</style>
	</head>
	<body>
		<!-- <select id="where">
		<option value="RLBag" id="RLBagID"> Ralph Lauren Bag</option>
		<option value="MBag" id="MBagID"> Maroon Bag</option>
		<option value="GBag" id="GBagID"> Green Bag</option>
		<option value="C1Bag" id=C1BagID> ClearBox 1</option>
	</select
	-->
	<div id="move">
			<img src="images/blue_circle.png" id="logo">
			<div id="dropdown">
				<a id="wonder">wonder.tv</a>
				<div class="content">
					<li class="navbar"><a href="Computerindex.html" ontouchend="index.html">home</a></li>
					<li class="navbar"><a href="contact.html" ontouchend="contact.html">contact</a></li>
					<li class="navbar"><a>donation</a></li>
					<li class="navbar"><a href="games.html">games</a></li>
					<li class="navbar"><a href="pictures.html">pictures</a></li>
					<li class="navbar"><a href="videos.html">videos</a></li>
					<li class="navbar"><a>sounds</a></li>
					<li class="navbar"><a href="gifs.html">gifs</a></li>
					<li class="navbar"><a href="banners.html">banners</a></li>
				</div>
			</div>
		</div>
		<!--
		<button type="button" onclick="getValue()">Get Value</button>
		-->
		<table id="table"></table>
		<input type="file" id="upload" onchange="readFile()">
		<!-- <form id="form">
		<input type="text" name="item" id="item"><br>
		<label>Item</label><br>
		<input type="text" name="quantity" id="quantity"><br>
		<label>Quantity</label><br>
		<input type="text" name="colour" id="colour"><br>
		<label>Colour</label><br>
		<input type="text" name="notes" id="notes"><br>
		<label>Notes</label><br>
		<input type="button" value="Submit" onclick="getFormData()">
	</form>
		-->
		<script>
			var edit;
			var processing;
			var placeholder;
			var length;
			var keys;
			var returnArray = "";
			const values_of_item = [];
			function getContentOfData() {
				return "";
			}
			function produceTable() {
				formTable();
			}
			function getFormData() {
				//getContentOfTable();
				var item = document.getElementById("item").value;
				document.getElementById("item").value = "";
				var quantity = document.getElementById("quantity").value;
				document.getElementById("quantity").value = "";
				var colour = document.getElementById("colour").value;
				document.getElementById("colour").value = "";
				var notes = document.getElementById("notes").value;
				document.getElementById("notes").value = "";
				insert(item, quantity, colour, notes);
				//produceTable();
			}
			function header() {
				var header = '<ol><li><tr>' + '<th>' + "Item" + '</th>' + '<th>' + "Quantity" + '</th>'
					+ '<th>' + "Colour" + '</th>' + '<th>' + "Notes" + '</th>' + '</tr></ol></li> ';
				return header;
			}
			function start() {
				return '<ol><li>';
			}
			function end() {
				return '</ol></<li> ';
			}
			function openNewRow(value) {
				return '<tr>';
			}
			function closeNewRow(value) {
				return '</tr>'
			}
			function newValue(value) {
				return '<th>' + value + '</th>';
			}
			function insert(value, value1, value2, value3) {
				var add = '<th>' + value + '</th>' + '<th>' + value1 + '</th>'
					+ '<th>' + value2 + '</th>' + '<th>' + value3 + '</th>' + '</tr></ol></li> ';
				var returnKey = "";
				returnKey = returnArray.substring(0, returnArray.length - 11) + add;
				returnArray = returnKey;
				var key = document.getElementById("table").innerHTML = returnKey;
				console.log(key);
			}
			function load() {
			}
			function formTable() {
				//Get together all the parts
				document.getElementById("table").innerHTML = header();
			}
			function getValue() {
				console.log(document.getElementById("where").value);
			}
			function readFile() {
				const file = document.getElementById('upload').files[0];
				console.log(file)
				const reader = new FileReader();
				reader.readAsText(file);
				reader.onload = function () {
					edit = reader.result;
					var value = removeWhiteSpace(edit);
					length = value.length;
					console.log(value);
					setTable(process(value));
				}
			}
			function removeWhiteSpace(value) {
				var processing = value.replace(/\s/g, "");
				return processing;
			}
			function process(value) {
				document.getElementById("table").innerHTML = "";
				values_of_items = value.split(",");
				console.log(values_of_items);
				//Marking where the first string is!
				if (values_of_items.includes("Item") === true) {
					for (let i = 0; i < values_of_items.length; i++) {
						if (values_of_items[i] === "Item") {
							keys = i;
							break;
						}
					}
				}
				console.log(values_of_items[16]);
				return values_of_items;
			}
			function setTable(value) {
				var newRow = "";
				returnArray = "";
				returnArray = returnArray + start()
				for (let i = keys; i < value.length; i++) {
					if (i % 7 === 0) {
						returnArray = returnArray + newValue(value[i]) + '<th><button>+</button></th><br>' + openNewRow() + closeNewRow();
					}
					else {
						if (i % 7 !== 0) {
							returnArray = returnArray + newValue(value[i]);
							//if ( i % 7 === 6) {
							//returnArray = returnArray + '<th><button>+</button></th><br>';
							//}
						}
					}
				}
				returnArray = returnArray + end();
				document.getElementById("table").innerHTML = returnArray;
				console.log(returnArray);
			}
		</script>
	</body>
</html>
